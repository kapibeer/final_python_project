from domain.models.season import Season
from commands.season_mailing import SeasonMailResult
from .types import RenderMessage, RenderButton
from dataclasses import dataclass


@dataclass(frozen=True)
class SeasonMailingRenderer:
    """
    Ð ÐµÐ½Ð´ÐµÑ€Ð¸Ñ‚ ÑÐµÐ·Ð¾Ð½Ð½Ð¾Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
    ÐŸÑ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ SeasonMailResult (user_id + season).
    """

    SEASON_MESSAGES = {
        Season.AUTUMN: (
            "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð§ÑƒÐ²ÑÑ‚Ð²ÑƒÐµÑˆÑŒ ÑÑ‚Ð¾Ñ‚ Ð¿Ñ€Ð¾Ñ…Ð»Ð°Ð´Ð½Ñ‹Ð¹ Ð²ÐµÑ‚ÐµÑ€Ð¾Ðº Ð¸ "
            "Ð°Ñ€Ð¾Ð¼Ð°Ñ‚ Ð¾Ð¿Ð°Ð²ÑˆÐµÐ¹ Ð»Ð¸ÑÑ‚Ð²Ñ‹? "
            "Ð­Ñ‚Ð¾ Ð¾ÑÐµÐ½ÑŒ Ð²ÑÑ‚ÑƒÐ¿Ð°ÐµÑ‚ Ð² ÑÐ²Ð¾Ð¸ Ð¿Ñ€Ð°Ð²Ð°! ðŸ Ð¡Ð°Ð¼Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¹ "
            "ÑƒÑŽÑ‚Ð½Ñ‹Ð¹ Ð³Ð°Ñ€Ð´ÐµÑ€Ð¾Ð±.\n\n"
            "Ð”Ð°Ð²Ð°Ð¹ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ð¼ÑÑ Ðº Ð·Ð¾Ð»Ð¾Ñ‚Ð¾Ð¼Ñƒ ÑÐµÐ·Ð¾Ð½Ñƒ Ð²Ð¼ÐµÑÑ‚Ðµ:\n"
            "â˜‘ï¸ Ð¢Ñ‘Ð¿Ð»Ð°Ñ ÐºÑƒÑ€Ñ‚ÐºÐ° Ð¸Ð»Ð¸ ÑƒÑŽÑ‚Ð½Ð¾Ðµ Ð¿Ð°Ð»ÑŒÑ‚Ð¾ â€” Ñ‚Ð²Ð¾Ð¹ Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ñ‰Ð¸Ñ‚"
            " Ð¾Ñ‚ Ð½ÐµÐ¿Ð¾Ð³Ð¾Ð´Ñ‹.\n"
            "â˜‘ï¸ ÐÐµÐ¿Ñ€Ð¾Ð¼Ð¾ÐºÐ°ÐµÐ¼Ð°Ñ Ð¾Ð±ÑƒÐ²ÑŒ â€” Ð´Ð»Ñ Ð¿Ñ€Ð¸ÑÑ‚Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð³ÑƒÐ»Ð¾Ðº Ð¿Ð¾ ÑˆÑƒÑ€ÑˆÐ°Ñ‰ÐµÐ¼Ñƒ"
            " ÐºÐ¾Ð²Ñ€Ñƒ Ð¸Ð· Ð»Ð¸ÑÑ‚ÑŒÐµÐ².\n"
            "â˜‘ï¸ Ð—Ð¾Ð½Ñ‚ (Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ, Ð½Ðµ Ð·Ð°Ñ‚ÐµÑ€ÑÐ»ÑÑ Ð»Ð¸ Ð¾Ð½ Ñ Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð³Ð¾ Ð³Ð¾Ð´Ð°!).\n"
            "â˜‘ï¸ Ð¢Ñ‘Ð¿Ð»Ñ‹Ð¹ ÑˆÐ°Ñ€Ñ„ Ð¸, Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð¿ÐµÑ€Ð²Ð°Ñ ÑˆÐ°Ð¿ÐºÐ° â€” Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²ÐµÑ‡ÐµÑ€Ð½Ð¸Ðµ"
            " Ð¿Ñ€Ð¾Ð³ÑƒÐ»ÐºÐ¸ Ð±Ñ‹Ð»Ð¸ Ð² Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒ.\n"
            "â˜‘ï¸ Ð¢ÐµÑ€Ð¼Ð¾ÐºÑ€ÑƒÐ¶ÐºÐ° Ñ Ð³Ð¾Ñ€ÑÑ‡Ð¸Ð¼ Ñ‡Ð°ÐµÐ¼ Ð¸Ð»Ð¸ ÐºÐ¾Ñ„Ðµ â€” Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ð½Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ"
            " Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ! ðŸ˜‰\n\n"
            "ÐžÐ´ÐµÐ²Ð°Ð¹ÑÑ Ñ‚ÐµÐ¿Ð»Ð¾ Ð¸ Ð½Ð°ÑÐ»Ð°Ð¶Ð´Ð°Ð¹ÑÑ ÑÐ°Ð¼Ð¾Ð¹ Ð¶Ð¸Ð²Ð¾Ð¿Ð¸ÑÐ½Ð¾Ð¹ Ð¿Ð¾Ñ€Ð¾Ð¹ Ð³Ð¾Ð´Ð°!"
        ),

        Season.WINTER: (
            "â„ï¸ Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ! ÐŸÐ¾ Ð²ÑÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ð¼ Ð½Ð°Ñ‡Ð°Ð»Ð°ÑÑŒ Ð¼ÐµÑ‚ÐµÐ¾Ñ€Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð·Ð¸Ð¼Ð°.\n"
            "Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ð¼Ð¸Ð½ÑƒÑÐ¾Ð²Ñ‹Ðµ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñ‹ Ð¸ ÑÐ½ÐµÐ³Ð¾Ð¿Ð°Ð´ ÑÐ¸Ð³Ð½Ð°Ð»ÑÑ‚: "
            "Ð¿Ð¾Ñ€Ð° Ð¿Ñ€Ð¾Ð²ÐµÑÑ‚Ð¸ Ñ€ÐµÐ²Ð¸Ð·Ð¸ÑŽ ÑÐ²Ð¾ÐµÐ³Ð¾ Ð·Ð¸Ð¼Ð½ÐµÐ³Ð¾ Ð°Ñ€ÑÐµÐ½Ð°Ð»Ð°!\n\n"
            "Ð”Ð¾ÑÑ‚Ð°Ð²Ð°Ð¹Ñ‚Ðµ:\n"
            "â€¢ Ð¢Ñ‘Ð¿Ð»ÑƒÑŽ ÐºÑƒÑ€Ñ‚ÐºÑƒ Ð¸Ð»Ð¸ Ð¿ÑƒÑ…Ð¾Ð²Ð¸Ðº\n"
            "â€¢ Ð¨Ð°Ð¿ÐºÑƒ, ÑˆÐ°Ñ€Ñ„ Ð¸ Ð²Ð°Ñ€ÐµÐ¶ÐºÐ¸\n"
            "â€¢ ÐÐµÐ¿Ñ€Ð¾Ð¼Ð¾ÐºÐ°ÐµÐ¼ÑƒÑŽ Ð·Ð¸Ð¼Ð½ÑŽÑŽ Ð¾Ð±ÑƒÐ²ÑŒ\n"
            "â€¢ Ð¢ÐµÑ€Ð¼Ð¾Ð±ÐµÐ»ÑŒÑ‘ Ð´Ð»Ñ Ð´Ð¾Ð»Ð³Ð¸Ñ… Ð¿Ñ€Ð¾Ð³ÑƒÐ»Ð¾Ðº\n\n"
            "ÐÐµ Ð´Ð°Ð¹Ñ‚Ðµ Ð¼Ð¾Ñ€Ð¾Ð·Ñƒ Ð·Ð°ÑÑ‚Ð°Ñ‚ÑŒ Ð²Ð°Ñ Ð²Ñ€Ð°ÑÐ¿Ð»Ð¾Ñ…!"
        ),

        Season.SPRING: (
            "Ð¢Ñ€ÐµÐ²Ð¾Ð³Ð°! Ð¢Ñ€ÐµÐ²Ð¾Ð³Ð°! âš ï¸ Ð’Ð°Ñˆ Ð¿ÑƒÑ…Ð¾Ð²Ð¸Ðº Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¾Ñ‚Ð¿ÑƒÑÐºÐ°!\n"
            "ÐŸÐ¾ Ð´Ð°Ð½Ð½Ñ‹Ð¼ Ñ€Ð°Ð·Ð²ÐµÐ´ÐºÐ¸: ÑÐ½ÐµÐ³ Ñ‚Ð°ÐµÑ‚, ÑÐ¾ÑÑƒÐ»ÑŒÐºÐ¸ Ð¿Ð°Ð´Ð°ÑŽÑ‚ â€” "
            "Ð½Ð° ÑƒÐ»Ð¸Ñ†Ðµ Ð’Ð•Ð¡ÐÐ! ðŸŒ¼\n\n"
            "Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹ Ðº Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Â«Ð¡Ð¼ÐµÐ½Ð° ÐºÑƒÑ€Ñ‚ÐºÐ¸Â»? ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð³Ð°Ñ€Ð´ÐµÑ€Ð¾Ð±:\n"
            "ðŸ§¥ Ð’ÐµÑ‚Ñ€Ð¾Ð²ÐºÐ° â€” Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ð±Ð¾ÐµÑ† Ð¿Ñ€Ð¾Ñ‚Ð¸Ð² Ð²ÐµÑ‚Ñ€Ð°\n"
            "ðŸ‘Ÿ ÐÐµÐ¿Ñ€Ð¾Ð¼Ð¾ÐºÐ°ÐµÐ¼Ð°Ñ Ð¾Ð±ÑƒÐ²ÑŒ â€” Ð´Ð»Ñ Ð¿Ð¾Ð±ÐµÐ´Ñ‹ Ð½Ð°Ð´ Ð»ÑƒÐ¶Ð°Ð¼Ð¸\n"
            "ðŸ‘’ Ð¨Ð°Ð¿ÐºÐ°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð½Ðµ Ð¿Ð°Ñ€Ð¸Ñ‚ (ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ Ð¼Ð¾Ñ€Ð¾Ð·ÐµÑ† ÐµÑ‰Ñ‘ ÐºÐ¾Ð²Ð°Ñ€ÐµÐ½)\n"
            "ðŸ˜Ž Ð¡Ð¾Ð»Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ð¾Ñ‡ÐºÐ¸ â€” Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÑ‚ÑŒ ÑÑ‚Ð¸Ð»ÑŒÐ½Ð¾, Ñ‰ÑƒÑ€ÑÑÑŒ Ð¾Ñ‚ ÑÐ¾Ð»Ð½Ñ†Ð°\n\n"
            "ÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ñ Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸ÐµÐ¼ Ð—Ð¸Ð¼Ð½ÐµÐ¹ Ð¡Ð¿ÑÑ‡ÐºÐ¸!"
        ),

        Season.SUMMER: (
            "Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ! ÐœÐµÑ‚ÐµÐ¾Ñ€Ð¾Ð»Ð¾Ð³Ð¸ Ð¾Ð±ÑŠÑÐ²Ð¸Ð»Ð¸ Ð¾ Ð½Ð°Ñ‡Ð°Ð»Ðµ Ð»ÐµÑ‚Ð½ÐµÐ³Ð¾ ÑÐµÐ·Ð¾Ð½Ð° ðŸŒžðŸŒžðŸŒž\n\n"
            "Ð¡Ð°Ð¼Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¿ÐµÑ€ÐµÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÑÐ²Ð¾Ð¹ Ð³Ð°Ñ€Ð´ÐµÑ€Ð¾Ð±!\n"
            "Ð§Ñ‚Ð¾Ð±Ñ‹ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐµÐ±Ñ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ð¾ Ð² Ð¶Ð°Ñ€ÐºÐ¸Ðµ Ð´Ð½Ð¸, ÑÐ¾Ð²ÐµÑ‚ÑƒÐµÐ¼:\n"
            "â˜‘ï¸ Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ‚Ñ‘Ð¿Ð»Ñ‹Ðµ Ð²ÐµÑ‰Ð¸ Ð½Ð° Ð»Ñ‘Ð³ÐºÐ¸Ðµ Ñ€ÑƒÐ±Ð°ÑˆÐºÐ¸, Ð¿Ð»Ð°Ñ‚ÑŒÑ Ð¸ Ñ„ÑƒÑ‚Ð±Ð¾Ð»ÐºÐ¸\n"
            "â˜‘ï¸ ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¾Ð»Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ð¾Ñ‡ÐºÐ¸ Ð¸ Ð³Ð¾Ð»Ð¾Ð²Ð½Ð¾Ð¹ ÑƒÐ±Ð¾Ñ€\n"
            "â˜‘ï¸ Ð”Ð¾ÑÑ‚Ð°Ñ‚ÑŒ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑƒÑŽ Ð¾Ð±ÑƒÐ²ÑŒ\n"
            "â˜‘ï¸ ÐÐµ Ð·Ð°Ð±Ñ‹Ñ‚ÑŒ Ð¾ ÑÐ¾Ð»Ð½Ñ†ÐµÐ·Ð°Ñ‰Ð¸Ñ‚Ð½Ð¾Ð¼ ÐºÑ€ÐµÐ¼Ðµ\n\n"
            "Ð‘ÐµÑ€ÐµÐ³Ð¸Ñ‚Ðµ ÑÐµÐ±Ñ Ð¾Ñ‚ Ð¿Ð°Ð»ÑÑ‰ÐµÐ³Ð¾ ÑÐ¾Ð»Ð½Ñ†Ð° Ð¸ Ð½Ð°ÑÐ»Ð°Ð¶Ð´Ð°Ð¹Ñ‚ÐµÑÑŒ Ð»ÐµÑ‚Ð½Ð¸Ð¼Ð¸ Ð´Ð½ÑÐ¼Ð¸!"
        ),
    }

    def render(self, result: SeasonMailResult) -> RenderMessage:
        # ÐµÑÐ»Ð¸ ÑÐµÐ·Ð¾Ð½ Ð½Ðµ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½ â€” Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ ÑˆÐ»Ñ‘Ð¼
        if result.season is None:
            return RenderMessage(
                text="",
                buttons=None,
            )

        text = self._render_text(result.season)

        buttons = [
            [RenderButton("ðŸ§¥ ÐŸÐ¾Ð´Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð»ÑƒÐº", "outfit:build")],
            [RenderButton("ðŸ§¥ Ð“Ð°Ñ€Ð´ÐµÑ€Ð¾Ð±", "wardrobe:open"),
             RenderButton("ðŸ  ÐœÐµÐ½ÑŽ", "menu:home")],
        ]

        return RenderMessage(text=text, buttons=buttons)

    def _render_text(self, season: Season) -> str:
        return self.SEASON_MESSAGES[season]
